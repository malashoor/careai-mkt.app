# API routes -> Netlify Functions
/api/*   /.netlify/functions/api/:splat   200

/ /en 308!

# Legal pages - ensure they're indexable
/legal/*
  X-Robots-Tag: index, follow
  Cache-Control: public, max-age=86400

/* 
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=(), interest-cohort=()
  Content-Security-Policy: default-src 'self'; img-src 'self' data: https:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' https:;
  Cache-Control: public, max-age=600

# Next.js static assets - PRODUCTION ONLY
/_next/*
  Cache-Control: public, max-age=31536000, immutable

# Static images - PRODUCTION ONLY
/images/*
  Cache-Control: public, max-age=31536000, immutable

# ========================================
# FLUTTER WEB APP CACHING STRATEGY
# ========================================
# PRODUCTION ONLY: These headers are applied by Netlify
# Local development uses standard Next.js caching

# Flutter SPA under /app - Dynamic content stays fresh
# PRODUCTION: Always revalidate for dynamic shell content
/app/*
  Cache-Control: public, max-age=0, must-revalidate

# Hash-named Flutter assets - PRODUCTION ONLY
# These can be cached aggressively for 1 year (immutable)
# Local dev: Standard Next.js caching applies
/app/**.js
  Cache-Control: public, max-age=31536000, immutable
/app/**.wasm
  Cache-Control: public, max-age=31536000, immutable
/app/**.png
  Cache-Control: public, max-age=31536000, immutable
/app/**.json
  Cache-Control: public, max-age=31536000, immutable
/app/**.mp3
  Cache-Control: public, max-age=31536000, immutable
/app/**.bin
  Cache-Control: public, max-age=31536000, immutable

# Specific Flutter core files - PRODUCTION ONLY
# These files are versioned and safe to cache long-term
/app/main.dart.js
  Cache-Control: public, max-age=31536000, immutable
/app/flutter.js
  Cache-Control: public, max-age=31536000, immutable
/app/flutter_bootstrap.js
  Cache-Control: public, max-age=31536000, immutable
/app/flutter_service_worker.js
  Cache-Control: public, max-age=31536000, immutable

# Flutter assets directories - PRODUCTION ONLY
# All static assets in these directories can be cached
/app/assets/*
  Cache-Control: public, max-age=31536000, immutable
/app/canvaskit/*
  Cache-Control: public, max-age=31536000, immutable
/app/icons/*
  Cache-Control: public, max-age=31536000, immutable
